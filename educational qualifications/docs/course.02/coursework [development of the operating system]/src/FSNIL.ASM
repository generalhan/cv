;-----------------------------------------------------------------------------
;                        îéêåÄíàêéÇôàä ÑàëäÖíõ
;-----------------------------------------------------------------------------
.MODEL TINY
.STACK 100H
.CODE
;-----------------------------------------------------------------------------
START:      
     JMP ERROR
       i dw 0
       STOR DB 0
       DOR DB 0
       SECT DB 0
       sector_mas dw 0
       MAS DB 4096 DUP (0)
     ERROR:
MOV cs:i,1
CIKL_FORMAT:
     cmp cs:i,2881
     je exit
       mov ax,cs:i
       MOV CS:SECTOR_MAS,ax
       CALL SECTOR
       CALL WRITE
     inc cs:i
jmp CIKL_FORMAT
exit:
MOV AX,4C00H
INT 21H
;-----------------------------------------------------------------------------
;/////////////////////////////////////////////////////////////////////////////
;/////////////////////////////////////////////////////////////////////////////
;-----------------------------------------------------------------------------
WRITE PROC
       PUSH CS
       POP ES
       ;---------
       MOV AH,03H
       MOV AL,01        
       LEA BX,CS:MAS   
       MOV CH,CS:DOR 
       MOV CL,CS:SECT   
       MOV DH,CS:STOR   
       MOV DL,00     
       INT 13H   
       RET
WRITE ENDP
;-----------------------------------------------------------------------------
;/////////////////////////////////////////////////////////////////////////////
;
;/////////////////////////////////////////////////////////////////////////////
;-----------------------------------------------------------------------------
SECTOR PROC
      MOV AX,CS:SECTOR_MAS
      MOV BX,AX
      CMP AX,1440
      JG STOR_ONE
      ;-----------------------------------------------------------------------
      ;-----------------------------------------------------------------------
      ;-----------------------------------------------------------------------
      MOV CS:STOR,0
      MOV CL,18
      DIV CL                                         
      ;-----
      CMP AH,0                                      
      JNE NET_OST
      ;-----------------------------------------------------------------------
      DEC AX
      MOV CS:DOR,AL
      MOV DL,18
      MOV CS:SECT,DL
      JMP EXIT_SECTOR                                
      ;-----------------------------------------------------------------------
      NET_OST:
      MOV CS:DOR,AL
      MOV CS:SECT,AH                                  
      JMP EXIT_SECTOR
      ;-----------------------------------------------------------------------
      ;-----------------------------------------------------------------------
      ;-----------------------------------------------------------------------
      STOR_ONE:
      MOV CS:STOR,1
      SUB AX,1440
      ;-----------------------------------------------------------------------
      MOV CL,18
      DIV CL                                           
      ;-----
      CMP AH,0                                          
      JNE NET_OST1
      ;-----------------------------------------------------------------------
      DEC AX                                          
      MOV CS:DOR,AL
      MOV DL,18
      MOV CS:SECT,DL
      JMP EXIT_SECTOR                               
      ;-----------------------------------------------------------------------
      NET_OST1:                                                
      MOV CS:DOR,AL
      MOV CS:SECT,AH
      JMP EXIT_SECTOR
      EXIT_SECTOR:RET
SECTOR ENDP
;-----------------------------------------------------------------------------
END START




