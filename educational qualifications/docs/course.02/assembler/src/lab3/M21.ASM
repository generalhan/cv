;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------
;-----------------------------------------------------------------------------
.MODEL SMALL
.STACK 100H
.DATA
 KOL_SIMBOLOV_STROKA_MAX EQU 63           ;äéãàóÖëíÇé ëàåÇéãéÇ ÇÇéÑàåõï Ç éäçé
 ;----------------------------------------------------------------------------
 S1 DW 0
 S2 DW 0
 ;----------------------------------------------------------------------------
 GLOBAL BUFER:BYTE
 GLOBAL TEXT:PROC
.386
.CODE
;-----------------------------------------------------------------------------
TEXT PROC
         MOV AX,DI
         MOV DI,[DI]
         IMUL DI,2
         MOV BP,DI
         ;------------
         MOV DI,AX
         MOV SI,[DI+2]
         IMUL SI,160
         ADD BP,SI
         ;------------
         LEA SI,BUFER
         MOV DI,AX
         ADD SI,[DI+16]
         ;-------------
         MOV CX,11
         MOV DI,BP        
         PUSH DI
         ;--------------------------------------------------------------------
         ;---------ÇõóàëãÖçàÖ êÄáçàñÄ èêà ÇõÇéÑÖ çÄ ùäêÄç---------------------
         DIR:
            CMP DI,160
            JL OK
            SUB DI,160
         JMP DIR
         ;--------------------------------------------------------------------
         OK:
           MOV S2,160
           SUB S2,130
           SUB S2,DI
           ;---------
           MOV S1,DI
           ;---------
           MOV AX,S2
           ADD AX,S1
           MOV S1,AX
         ;--------------------------------------------------------------------
         POP DI
         WRITE:
              ;---------------------------------------------------------------
              PUSH CX
              MOV CX,KOL_SIMBOLOV_STROKA_MAX
              CIKL_WRITE:
                     MOV AL,[SI]
                     MOV AH,31
                     MOV ES:[DI],AX
                     ADD DI,2
                     INC SI
              LOOP CIKL_WRITE
              ADD DI,4
              POP CX
              ;---------------------------------------------------------------
              ADD DI,S1
         LOOP WRITE
         RET
TEXT ENDP
;-----------------------------------------------------------------------------
END
