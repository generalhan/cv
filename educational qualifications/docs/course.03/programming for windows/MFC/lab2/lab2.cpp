//////////////////////////////////////////////////////////////////////////////
//
//              Окончательная версия ЛР №2 по MFC
//              Автор: Потеренко А.Г. ВТ-31 2006г.
//              Дата завершения: 8.03.2006г.
//
//////////////////////////////////////////////////////////////////////////////
#include "afxwin.h" 
#include "resource.h" 
#include "Dialog_LAB2.h"
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
class CPaintDC_LAB2: public CPaintDC
{
    public:
      CPaintDC_LAB2(CWnd* pWnd) : CPaintDC(pWnd)
	  {}
      void DRAW_LAB2()
	  {
        	int p=0;
            CPen cp;
            CBrush hBr;
            LOGBRUSH lb;
			//////////////////////////////////////////////////////////////////
	   	    lb.lbColor=RGB(200,100,10);
            lb.lbStyle=BS_SOLID;
            lb.lbHatch=NULL;
			//////////////////////////Фон закраски////////////////////////////
			hBr.CreateBrushIndirect(&lb);
		    SelectObject(hBr);
            //////////////////////////////////////////////////////////////////
	        cp.CreatePen(NULL,3,RGB(10,78,90));
 	        SelectObject(cp);
	        Arc(10,10,50,150,p,p,p,p);
			cp.DeleteObject();
			//////////////////////////////////////////////////////////////////
	        cp.CreatePen(NULL,8,RGB(100,178,90));
 	        SelectObject(cp);
	        Arc(100,100,150,150,p,p,p,p);
			cp.DeleteObject();
            //////////////////////////////////////////////////////////////////
		    cp.CreatePen(NULL,2,RGB(1,240,90));
 	        SelectObject(cp);
	        Arc(100,300,150,350,170,170,10,600);
			cp.DeleteObject(); 
			//////////////////////////////////////////////////////////////////
		    cp.CreatePen(NULL,3,RGB(200,178,90));
 	        SelectObject(cp);
	        Rectangle(300,100,350,150);
			cp.DeleteObject();
            //////////////////////////////////////////////////////////////////
		    cp.CreatePen(PS_DASHDOT,1,RGB(255,1,255));
 	        SelectObject(cp);
	        Rectangle(400,200,450,250);
			cp.DeleteObject();
            //////////////////////////////////////////////////////////////////
		    cp.CreatePen(PS_DASHDOTDOT,1,RGB(25,1,255));
 	        SelectObject(cp);
	        MoveTo(0,0);
            LineTo(800,200);
			cp.DeleteObject();
	  }
};
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
class CFrameWnd_LAB2 : public CFrameWnd
{
   private:
     bool flag;
   public:
	CMenu Menu_LAB2;
	//////////////////////////////////////////////////////////////////////////
 	CFrameWnd_LAB2()
	{
        flag=false;
		Create(
			   NULL,
			   "Лабораторная работа №2",
			   WS_OVERLAPPEDWINDOW,
			   rectDefault,
		       NULL,
			   NULL
			  );
		Menu_LAB2.LoadMenu(IDR_MENU1);
        SetMenu(&Menu_LAB2);
	};
	//////////////////////////////////////////////////////////////////////////
    void LAB2_MENU_FUNC1()
	{
		flag=true;       
		InvalidateRect(NULL,true);      
		UpdateWindow();
	};
	//////////////////////////////////////////////////////////////////////////
    void LAB2_MENU_FUNC2()
	{
	    CDialog_LAB2 D;
	    D.DoModal();	
	};
    //////////////////////////////////////////////////////////////////////////
	void LAB2_MENU_FUNC3()
	{
	  	DestroyWindow();
	};
	//////////////////////////////////////////////////////////////////////////
    void CFrameWnd_LAB2::OnPaint()
	{
       CPaintDC_LAB2 dc(this);
       CBrush brush(GetSysColor(COLOR_3DDKSHADOW));
       CRect REC;
       GetClientRect(REC);
       dc.FillRect(REC, &brush);
       if (flag==true)
         	dc.DRAW_LAB2(); 
	};
   private:
	DECLARE_MESSAGE_MAP();
};
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
BEGIN_MESSAGE_MAP(CFrameWnd_LAB2, CFrameWnd)
    ON_WM_PAINT()
	ON_COMMAND(ID_MENUITEM40001,LAB2_MENU_FUNC2)
	ON_COMMAND(ID_MENUITEM40002,LAB2_MENU_FUNC1)
    ON_COMMAND(ID_MENUITEM40003,LAB2_MENU_FUNC3)
END_MESSAGE_MAP()
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
class CWinApp_LAB2 : public CWinApp
{
  public:
	CWinApp_LAB2()
	{};
	virtual BOOL InitInstance()
	{
       	m_pMainWnd=new CFrameWnd_LAB2();	
	    ASSERT(m_pMainWnd);
 	    m_pMainWnd->ShowWindow(SW_SHOW);
	    m_pMainWnd->UpdateWindow();	
	    return TRUE;
	}
};
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
CWinApp_LAB2 theApp;	
